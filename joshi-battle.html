<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>助詞クイズバトル</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes shake {
      0% { transform: translate(0, 0); }
      20% { transform: translate(-5px, 0); }
      40% { transform: translate(5px, 0); }
      60% { transform: translate(-5px, 0); }
      80% { transform: translate(5px, 0); }
      100% { transform: translate(0, 0); }
    }

    .shake {
      animation: shake 0.4s ease-in-out;
    }

    @keyframes popText {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      30% {
        opacity: 1;
        transform: translateY(0);
      }
      100% {
        opacity: 0;
        transform: translateY(-10px);
      }
    }

    #animatedMessage {
      position: relative;
      display: inline-block;
      font-size: 1.25rem;
      font-weight: bold;
      animation: popText 1s ease-out;
      pointer-events: none;
    }
  </style>
</head>
<body class="flex flex-col min-h-screen font-sans bg-gray-50">


    <!-- ヘッダー -->
    <div id="header"></div>

  <div class="max-w-xl mx-auto bg-white p-6 rounded shadow text-center">
    <h1 class="text-2xl font-bold mb-4">Beat the monster！</h1>

    <!-- 敵キャラとHP -->
    <div class="mb-4">
      <img id="enemyImg" src="/img/slime_normal.png" alt="スライム" class="w-40 h-40 mx-auto mb-2 transition-all duration-300">
      <p class="text-lg font-semibold">Enemy's Hit Point: <span id="enemyHp">100</span></p>
      <div class="w-full bg-gray-200 h-4 rounded">
        <div id="enemyHpBar" class="bg-red-500 h-4 rounded" style="width: 100%;"></div>
      </div>
    </div>

    <!-- クイズ問題 -->
    <div class="mb-6">
      <p id="question" class="text-2xl font-bold mb-2">（読み込み中...）</p>
      <div id="choices" class="space-y-2"></div>
    </div>

    <!-- アニメーションメッセージ -->
    <p id="message" class="h-8 mt-4"></p>
  </div>

  <!-- フッター -->
<footer class="bg-gray-200 text-center text-sm p-4 text-gray-600">
  <nav class="mb-2">
    <a href="/privacy.html" class="mx-2 hover:underline">
      プライバシーポリシー / Privacy Policy
    </a>
    |
    <a href="/about.html" class="mx-2 hover:underline">
      運営者情報 / About
    </a>
    |
    <a href="/contact.html" class="mx-2 hover:underline">
      お問い合わせ / Contact
    </a>
  </nav>
  © 2025 Sakura Nihongo. All rights reserved.<br>
  本アプリの日本語単語リストはオープンデータ（MIT/CC0/Public Domain）や自作データをもとにしています。<br>
  Japanese vocabulary lists in this app are based on open data (MIT/CC0/Public Domain) and original data.
</footer>

  <script>
const questions = [
  {
    "text": "私は毎日日本語___勉強しています。",
    "choices": [
      "を",
      "が",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "彼___サッカーの試合でゴールを決めました。",
    "choices": [
      "が",
      "は",
      "を"
    ],
    "answer": "は"
  },
  {
    "text": "田中さん___今朝、学校に来ました。",
    "choices": [
      "は",
      "が",
      "を"
    ],
    "answer": "が"
  },
  {
    "text": "この本___昨日図書館で借りました。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "山田さん___有名な医者です。",
    "choices": [
      "が",
      "は",
      "を"
    ],
    "answer": "は"
  },
  {
    "text": "猫___ソファの上でぐっすり寝ています。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "が"
  },
  {
    "text": "私はお寿司___たくさん食べました。",
    "choices": [
      "を",
      "が",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "妹___来年高校に入学します。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "は"
  },
  {
    "text": "昨日、友達と一緒に映画___見ました。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "この人___有名な俳優です。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "は"
  },
  {
    "text": "弟___毎朝6時に起きてジョギングします。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "が"
  },
  {
    "text": "私はクラシック音楽___よく聞きます。",
    "choices": [
      "を",
      "が",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "お母さん___スーパーに買い物に行きました。",
    "choices": [
      "は",
      "を",
      "が"
    ],
    "answer": "は"
  },
  {
    "text": "学生___この小説を全員読みました。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "が"
  },
  {
    "text": "あなた___新しいメンバーですか？",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "は"
  },
  {
    "text": "日曜日に子どもたちは公園___遊びに行きました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "へ"
  },
  {
    "text": "私は仕事が終わった後、家___帰りました。",
    "choices": [
      "に",
      "で",
      "へ"
    ],
    "answer": "に"
  },
  {
    "text": "彼は毎日図書館___勉強しています。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "駅___大勢の人が並んでいました。",
    "choices": [
      "に",
      "で",
      "へ"
    ],
    "answer": "に"
  },
  {
    "text": "兄は東京の会社___働いています。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "彼女___長い手紙を書きました。",
    "choices": [
      "へ",
      "で",
      "に"
    ],
    "answer": "に"
  },
  {
    "text": "母と一緒にスーパー___買い物をしました。",
    "choices": [
      "に",
      "で",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "週末は映画館___ホラー映画を観に行きます。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "に"
  },
  {
    "text": "学生たちは教室___入って、席に座りました。",
    "choices": [
      "へ",
      "で",
      "に"
    ],
    "answer": "に"
  },
  {
    "text": "彼は病院___友達を見舞いに行きました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "へ"
  },
  {
    "text": "私たちは夏休みに東京___旅行しました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "へ"
  },
  {
    "text": "昨日、学校___友達と一緒に昼ごはんを食べました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "誕生日に友達___プレゼントをあげました。",
    "choices": [
      "に",
      "で",
      "を"
    ],
    "answer": "に"
  },
  {
    "text": "私は駅___電車に乗りました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "授業の後、先生___質問をしました。",
    "choices": [
      "を",
      "に",
      "で"
    ],
    "answer": "に"
  },
  {
    "text": "私は新しいスマホ___買いました。",
    "choices": [
      "を",
      "が",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "彼___数学が得意です。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "は"
  },
  {
    "text": "先生___教室に入りました。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "が"
  },
  {
    "text": "彼女___料理がとても上手です。",
    "choices": [
      "が",
      "は",
      "を"
    ],
    "answer": "は"
  },
  {
    "text": "私は音楽___聴きながら勉強します。",
    "choices": [
      "を",
      "が",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "弟___ケーキを全部食べました。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "が"
  },
  {
    "text": "祖母___毎朝散歩をします。",
    "choices": [
      "は",
      "が",
      "を"
    ],
    "answer": "は"
  },
  {
    "text": "犬___庭で遊んでいます。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "が"
  },
  {
    "text": "私は毎日コーヒー___飲みます。",
    "choices": [
      "を",
      "が",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "田中さん___昨日の会議に参加しました。",
    "choices": [
      "は",
      "が",
      "を"
    ],
    "answer": "は"
  },
  {
    "text": "兄___ギターを弾いています。",
    "choices": [
      "が",
      "は",
      "を"
    ],
    "answer": "が"
  },
  {
    "text": "妹___英語の勉強を始めました。",
    "choices": [
      "が",
      "を",
      "は"
    ],
    "answer": "は"
  },
  {
    "text": "私は小説___読むのが好きです。",
    "choices": [
      "を",
      "が",
      "は"
    ],
    "answer": "を"
  },
  {
    "text": "父___今日から出張に行きます。",
    "choices": [
      "は",
      "が",
      "を"
    ],
    "answer": "は"
  },
  {
    "text": "先生___学生に質問をしました。",
    "choices": [
      "が",
      "は",
      "を"
    ],
    "answer": "が"
  },
  {
    "text": "郵便局___手紙を出しました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "友達の家___遊びに行きました。",
    "choices": [
      "へ",
      "に",
      "で"
    ],
    "answer": "に"
  },
  {
    "text": "図書館___静かにしなければなりません。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "空港___荷物を預けました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "おばあちゃん___電話をかけました。",
    "choices": [
      "に",
      "で",
      "を"
    ],
    "answer": "に"
  },
  {
    "text": "駅前のカフェ___お茶を飲みました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "子どもたちは学校___向かっています。",
    "choices": [
      "に",
      "で",
      "へ"
    ],
    "answer": "へ"
  },
  {
    "text": "美術館___絵を見ました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "大学___入学しました。",
    "choices": [
      "に",
      "で",
      "へ"
    ],
    "answer": "に"
  },
  {
    "text": "部屋___電気をつけました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "郵便局___荷物を受け取りました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "で"
  },
  {
    "text": "祖父___お土産を買いました。",
    "choices": [
      "に",
      "で",
      "を"
    ],
    "answer": "に"
  },
  {
    "text": "友達___会うために公園に行きました。",
    "choices": [
      "に",
      "で",
      "へ"
    ],
    "answer": "に"
  },
  {
    "text": "ホテル___チェックインしました。",
    "choices": [
      "で",
      "に",
      "へ"
    ],
    "answer": "に"
  },
  {
    "text": "彼女___メールを送りました。",
    "choices": [
      "に",
      "で",
      "へ"
    ],
    "answer": "に"
  }
];

    let current = 0;
    let enemyHp =100;

    const enemyImg = document.getElementById("enemyImg");
    const questionEl = document.getElementById("question");
    const choicesEl = document.getElementById("choices");
    const enemyHpEl = document.getElementById("enemyHp");
    const enemyHpBar = document.getElementById("enemyHpBar");
    const messageEl = document.getElementById("message");

    function showAnimatedMessage(text, colorClass = "text-green-600") {
      messageEl.innerHTML = `<span id="animatedMessage" class="${colorClass}">${text}</span>`;
    }

    function loadQuestion() {
      const q = questions[current];
      questionEl.textContent = q.text;
      choicesEl.innerHTML = "";
      q.choices.forEach(choice => {
        const btn = document.createElement("button");
        btn.textContent = choice;
        btn.className = "bg-blue-500 text-white px-4 py-2 rounded mr-2";
        btn.onclick = () => checkAnswer(choice);
        choicesEl.appendChild(btn);
      });
    }

    function checkAnswer(choice) {
      const q = questions[current];
      if (choice === q.answer) {
        showAnimatedMessage("Correct！Attack！", "text-green-800");
        enemyImg.src = "/img/slime_hurt.png";
        enemyImg.classList.add("shake");

        setTimeout(() => {
          enemyHp -= 30;
          if (enemyHp < 0) enemyHp = 0;
          enemyHpEl.textContent = enemyHp;
          enemyHpBar.style.width = `${enemyHp}%`;

          if (enemyHp === 0) {
            enemyImg.src = "/img/slime_defeated.png";
            showAnimatedMessage("You beat it！Congrats！🎉", "text-purple-800");
          } else {
            enemyImg.src = "/img/slime_normal.png";
            enemyImg.classList.remove("shake");
            nextQuestion();
          }
        }, 500);
      } else {
        showAnimatedMessage("Worng…Try Again！", "text-red-800");
        setTimeout(() => {
          nextQuestion();
        }, 1000);
      }
    }

    function nextQuestion() {
      current = (current + 1) % questions.length;
      loadQuestion();
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    shuffleArray(questions);
    loadQuestion();
  
  </script>

     <script>
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
            document.getElementById('header').innerHTML = data;
            });
    </script>
</body>
</html>
