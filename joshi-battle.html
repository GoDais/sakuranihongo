<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>åŠ©è©ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ«</title>
  <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes shake {
        0% { transform: translate(0, 0); }
        20% { transform: translate(-5px, 0); }
        40% { transform: translate(5px, 0); }
        60% { transform: translate(-5px, 0); }
        80% { transform: translate(5px, 0); }
        100% { transform: translate(0, 0); }
        }

        .shake {
        animation: shake 0.4s ease-in-out;
        }
    </style>
</head>
<body class="bg-blue-50 text-gray-800 p-6">
  <div class="max-w-xl mx-auto bg-white p-6 rounded shadow text-center">
    <h1 class="text-2xl font-bold mb-4">åŠ©è©ã‚¯ã‚¤ã‚ºãƒãƒˆãƒ«ï¼</h1>

    <!-- æ•µã‚­ãƒ£ãƒ©ã¨HP -->
    <div class="mb-4">
      <img id="enemyImg" src="/img/slime_normal.png" alt="ã‚¹ãƒ©ã‚¤ãƒ " class="w-40 h-40 mx-auto mb-2 transition-all duration-300">
      <p class="text-lg font-semibold">æ•µã®HP: <span id="enemyHp">100</span></p>
      <div class="w-full bg-gray-200 h-4 rounded">
        <div id="enemyHpBar" class="bg-red-500 h-4 rounded" style="width: 100%;"></div>
      </div>
    </div>

    <!-- ãƒ‘ãƒ¯ãƒ¼ã¨æ”»æ’ƒãƒœã‚¿ãƒ³ -->
    <div class="mb-4">
      <p class="text-lg font-semibold">ã‚ãªãŸã®ãƒ‘ãƒ¯ãƒ¼: <span id="power">0</span></p>
      <button id="attackBtn" class="bg-red-600 text-white px-4 py-2 mt-2 rounded disabled:opacity-50" disabled>æ”»æ’ƒï¼</button>
    </div>

    <!-- ã‚¯ã‚¤ã‚ºå•é¡Œ -->
    <div class="mb-6">
      <p id="question" class="text-lg font-bold mb-2">ï¼ˆèª­ã¿è¾¼ã¿ä¸­...ï¼‰</p>
      <div id="choices" class="space-y-2"></div>
    </div>

    <p id="message" class="text-green-600 font-semibold mt-4"></p>
  </div>

  <script>
    const questions = [
      { text: "ç§ã¯æ—¥æœ¬èª___å‹‰å¼·ã—ã¦ã„ã¾ã™ã€‚", choices: ["ã‚’", "ãŒ", "ã¯"], answer: "ã‚’" },
      { text: "å½¼___ã‚µãƒƒã‚«ãƒ¼ãŒä¸Šæ‰‹ã§ã™ã€‚", choices: ["ãŒ", "ã¯", "ã‚’"], answer: "ã¯" },
      { text: "ç”°ä¸­ã•ã‚“___æ¥ã¾ã—ãŸã‹ï¼Ÿ", choices: ["ã¯", "ãŒ", "ã‚’"], answer: "ãŒ" },
    ];

    let current = 0;
    let power = 0;
    let enemyHp = 100;

    const enemyImg = document.getElementById("enemyImg");
    const questionEl = document.getElementById("question");
    const choicesEl = document.getElementById("choices");
    const powerEl = document.getElementById("power");
    const enemyHpEl = document.getElementById("enemyHp");
    const enemyHpBar = document.getElementById("enemyHpBar");
    const attackBtn = document.getElementById("attackBtn");
    const messageEl = document.getElementById("message");

    function loadQuestion() {
      const q = questions[current];
      questionEl.textContent = q.text;
      choicesEl.innerHTML = "";
      q.choices.forEach(choice => {
        const btn = document.createElement("button");
        btn.textContent = choice;
        btn.className = "bg-blue-500 text-white px-4 py-2 rounded mr-2";
        btn.onclick = () => checkAnswer(choice);
        choicesEl.appendChild(btn);
      });
    }

    function checkAnswer(choice) {
      const q = questions[current];
      if (choice === q.answer) {
        messageEl.textContent = "æ­£è§£ï¼ãƒ‘ãƒ¯ãƒ¼ +10";
        power += 10;
        powerEl.textContent = power;
        if (power >= 30) attackBtn.disabled = false;
      } else {
        messageEl.textContent = "ä¸æ­£è§£â€¦ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ï¼";
      }

      current = (current + 1) % questions.length;
      setTimeout(() => {
        messageEl.textContent = "";
        loadQuestion();
      }, 1000);
    }

    attackBtn.onclick = () => {
      if (power >= 30 && enemyHp > 0) {
        power -= 30;
        powerEl.textContent = power;
        if (power < 30) attackBtn.disabled = true;

        // ãƒ€ãƒ¡ãƒ¼ã‚¸æ¼”å‡º
        enemyImg.src = "/img/slime_hurt.png";

        // â† ã“ã“ã§ .shake ã‚’è¿½åŠ 
        enemyImg.classList.add("shake");

        setTimeout(() => {
          enemyHp -= 30;
          if (enemyHp < 0) enemyHp = 0;
          enemyHpEl.textContent = enemyHp;
          enemyHpBar.style.width = `${enemyHp}%`;

          if (enemyHp === 0) {
            enemyImg.src = "/img/slime_defeated.png";
            messageEl.textContent = "æ•µã‚’å€’ã—ãŸï¼ãŠã‚ã§ã¨ã†ï¼ğŸ‰";
            attackBtn.disabled = true;
          } else {
            // é€šå¸¸ã®é¡”ã«æˆ»ã™
            enemyImg.src = "/img/slime_normal.png";
            messageEl.textContent = "æ”»æ’ƒæˆåŠŸï¼";
          }
            // â† ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã« shake ã‚¯ãƒ©ã‚¹ã‚’é™¤å»
            enemyImg.classList.remove("shake");
        }, 500);
      }
    };

    loadQuestion();
  </script>
</body>
</html>
