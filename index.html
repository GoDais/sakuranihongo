<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ひらがな・カタカナ⇔ローマ字クイズ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { box-sizing: border-box; }
    @keyframes pop {
      0%   { transform: scale(1); opacity: 0; }
      30%  { transform: scale(1.5); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      50% { transform: translateX(10px); }
      75% { transform: translateX(-10px); }
      100% { transform: translateX(0); }
    }
    @keyframes scorePop {
      0%   { transform: scale(1); }
      50%  { transform: scale(1.5); }
      100% { transform: scale(1); }
    }
    .feedback.correct {
      color: #22c55e;
      animation: pop 0.4s ease;
    }
    .feedback.incorrect {
      color: #ef4444;
      animation: shake 0.4s ease;
    }
    .score-animate {
      animation: scorePop 0.4s ease;
    }
  </style>
</head>
<body class="flex flex-col min-h-screen font-sans bg-gray-50">

  <!-- ヘッダー -->
  <header class="bg-cover bg-center text-white p-4 md:p-6 flex flex-col md:flex-row md:items-center justify-between gap-4"
          style="background-image: url('23114880_l.jpg');">
    <div class="flex items-center space-x-4">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Japanese_Hiragana_ky.svg/512px-Japanese_Hiragana_ky.svg.png"
           alt="ロゴ" class="w-12 h-12 rounded-full shadow-lg bg-white">
      <div>
        <h1 class="text-xl sm:text-2xl md:text-3xl font-bold drop-shadow">さくらにほんご　日本語のお勉強</h1>
        <p class="text-sm sm:text-base opacity-90">遊びながら日本語を覚えよう！</p>
      </div>
    </div>
    <div class="text-sm opacity-80 hidden md:block">Powered by Tailwind CSS</div>
  </header>

  <!-- ハンバーガーメニュー（スマホ専用） -->
  <div class="md:hidden flex justify-between items-center bg-gray-800 text-white px-4 py-3">
    <span class="font-bold text-lg">Quiz Menu</span>
    <button onclick="toggleMobileMenu()" aria-label="メニューを開く">
      <svg class="w-6 h-6" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 6h14M3 10h14M3 14h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </div>

  <!-- モバイルメニュー -->
  <nav id="mobileMenu" class="md:hidden bg-gray-700 text-white px-4 py-2 hidden transition-all duration-300">
    <ul class="space-y-2">
      <li class="hover:underline cursor-pointer" onclick="startQuiz('hiraToRoma'); toggleMobileMenu();">ひらがな → ローマ字</li>
      <li class="hover:underline cursor-pointer" onclick="startQuiz('romaToHira'); toggleMobileMenu();">ローマ字 → ひらがな</li>
      <li class="hover:underline cursor-pointer" onclick="startQuiz('kataToRoma'); toggleMobileMenu();">カタカナ → ローマ字</li>
      <li class="hover:underline cursor-pointer" onclick="startQuiz('romaToKata'); toggleMobileMenu();">ローマ字 → カタカナ</li>
    </ul>
  </nav>

  <div class="flex flex-1 flex-col md:flex-row">
    <!-- PC用ナビ -->
    <nav class="hidden md:block w-52 bg-gray-800 text-white p-4">
      <h2 class="text-lg font-semibold mb-4">Quiz Menu</h2>
      <ul class="space-y-2">
        <li class="hover:underline cursor-pointer" onclick="startQuiz('hiraToRoma')">ひらがな → ローマ字</li>
        <li class="hover:underline cursor-pointer" onclick="startQuiz('romaToHira')">ローマ字 → ひらがな</li>
        <li class="hover:underline cursor-pointer" onclick="startQuiz('kataToRoma')">カタカナ → ローマ字</li>
        <li class="hover:underline cursor-pointer" onclick="startQuiz('romaToKata')">ローマ字 → カタカナ</li>
      </ul>
    </nav>

    <!-- クイズ画面 -->
    <main class="flex-1 p-4 sm:p-6 flex flex-col items-center justify-center relative">
      <div id="scoreDisplay" class="text-xl sm:text-2xl font-bold text-gray-600 transition-all duration-300 ease-in-out">
        Score: 0
      </div>
      <div id="question" class="text-4xl sm:text-6xl md:text-[100px] font-bold mb-10 text-center text-gray-800 drop-shadow-lg tracking-wide">
        メニューからクイズを選んでね！
      </div>
      <div id="choices" class="flex flex-wrap justify-center gap-4 w-full px-2 sm:px-0"></div>
      <div id="feedback" class="feedback mt-8 text-3xl sm:text-5xl font-extrabold transition-all duration-300 drop-shadow text-center"></div>
      <div id="timer" class="mt-4 text-red-600 text-2xl sm:text-3xl font-bold tracking-wide">Time Left: --</div>
    </main>
  </div>

  <!-- フッター -->
  <footer class="bg-gray-200 text-center text-sm p-4 text-gray-600">
    © 2025 Hiragana/Katakana Quiz App - 制作：Sakura Nihongo
  </footer>

  <script>
    // ひらがな・カタカナ・ローマ字一覧
    const quizData = [
      { hira: "あ", kata: "ア", roma: "a" }, { hira: "い", kata: "イ", roma: "i" }, { hira: "う", kata: "ウ", roma: "u" },
      { hira: "え", kata: "エ", roma: "e" }, { hira: "お", kata: "オ", roma: "o" }, { hira: "か", kata: "カ", roma: "ka" },
      { hira: "き", kata: "キ", roma: "ki" }, { hira: "く", kata: "ク", roma: "ku" }, { hira: "け", kata: "ケ", roma: "ke" },
      { hira: "こ", kata: "コ", roma: "ko" }, { hira: "さ", kata: "サ", roma: "sa" }, { hira: "し", kata: "シ", roma: "shi" },
      { hira: "す", kata: "ス", roma: "su" }, { hira: "せ", kata: "セ", roma: "se" }, { hira: "そ", kata: "ソ", roma: "so" },
      { hira: "た", kata: "タ", roma: "ta" }, { hira: "ち", kata: "チ", roma: "chi" }, { hira: "つ", kata: "ツ", roma: "tsu" },
      { hira: "て", kata: "テ", roma: "te" }, { hira: "と", kata: "ト", roma: "to" }, { hira: "な", kata: "ナ", roma: "na" },
      { hira: "に", kata: "ニ", roma: "ni" }, { hira: "ぬ", kata: "ヌ", roma: "nu" }, { hira: "ね", kata: "ネ", roma: "ne" },
      { hira: "の", kata: "ノ", roma: "no" }, { hira: "は", kata: "ハ", roma: "ha" }, { hira: "ひ", kata: "ヒ", roma: "hi" },
      { hira: "ふ", kata: "フ", roma: "fu" }, { hira: "へ", kata: "ヘ", roma: "he" }, { hira: "ほ", kata: "ホ", roma: "ho" },
      { hira: "ま", kata: "マ", roma: "ma" }, { hira: "み", kata: "ミ", roma: "mi" }, { hira: "む", kata: "ム", roma: "mu" },
      { hira: "め", kata: "メ", roma: "me" }, { hira: "も", kata: "モ", roma: "mo" }, { hira: "や", kata: "ヤ", roma: "ya" },
      { hira: "ゆ", kata: "ユ", roma: "yu" }, { hira: "よ", kata: "ヨ", roma: "yo" }, { hira: "ら", kata: "ラ", roma: "ra" },
      { hira: "り", kata: "リ", roma: "ri" }, { hira: "る", kata: "ル", roma: "ru" }, { hira: "れ", kata: "レ", roma: "re" },
      { hira: "ろ", kata: "ロ", roma: "ro" }, { hira: "わ", kata: "ワ", roma: "wa" }, { hira: "を", kata: "ヲ", roma: "wo" },
      { hira: "ん", kata: "ン", roma: "n" }
    ];

    let currentQuestion, currentMode, timer, timeLeft = 10;
    let score = 0;

    function startQuiz(mode) {
      currentMode = mode;
      score = 0;
      updateScore();
      getRandomQuestion();
    }

    function updateScore() {
      const scoreEl = document.getElementById("scoreDisplay");
      scoreEl.textContent = `Score: ${score}`;
      scoreEl.classList.remove("score-animate");
      void scoreEl.offsetWidth;
      scoreEl.classList.add("score-animate");
    }

    function getRandomQuestion() {
      clearInterval(timer);
      timeLeft = 10;
      updateTimer();

      currentQuestion = quizData[Math.floor(Math.random() * quizData.length)];
      let questionText, correctAnswer;

      if (currentMode === 'hiraToRoma') {
        questionText = currentQuestion.hira;
        correctAnswer = currentQuestion.roma;
      } else if (currentMode === 'romaToHira') {
        questionText = currentQuestion.roma;
        correctAnswer = currentQuestion.hira;
      } else if (currentMode === 'kataToRoma') {
        questionText = currentQuestion.kata;
        correctAnswer = currentQuestion.roma;
      } else if (currentMode === 'romaToKata') {
        questionText = currentQuestion.roma;
        correctAnswer = currentQuestion.kata;
      } else {
        // fallback
        questionText = "メニューからクイズを選んでね！";
        correctAnswer = "";
      }

      document.getElementById("question").textContent = questionText;
      const feedback = document.getElementById("feedback");
      feedback.textContent = "";
      feedback.classList.remove("correct", "incorrect");

      // 選択肢作成
      const choices = new Set();
      choices.add(correctAnswer);
      while (choices.size < 4) {
        const rand = quizData[Math.floor(Math.random() * quizData.length)];
        if (currentMode === 'hiraToRoma' || currentMode === 'kataToRoma')
          choices.add(rand.roma);
        else if (currentMode === 'romaToHira')
          choices.add(rand.hira);
        else if (currentMode === 'romaToKata')
          choices.add(rand.kata);
      }

      const shuffled = Array.from(choices).sort(() => Math.random() - 0.5);
      const choicesContainer = document.getElementById("choices");
      choicesContainer.innerHTML = "";
      shuffled.forEach(choice => {
        const btn = document.createElement("button");
        btn.textContent = choice;
        btn.className = "text-xl sm:text-2xl md:text-3xl px-4 sm:px-6 md:px-8 py-3 sm:py-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-md transition duration-300 w-full sm:w-auto";
        btn.onclick = () => checkAnswer(choice, correctAnswer);
        choicesContainer.appendChild(btn);
      });

      timer = setInterval(() => {
        timeLeft--;
        updateTimer();
        if (timeLeft <= 0) {
          clearInterval(timer);
          feedback.textContent = "Time Over！";
          feedback.classList.add("incorrect");
          setTimeout(getRandomQuestion, 1500);
        }
      }, 1000);
    }

    function updateTimer() {
      document.getElementById("timer").textContent = `Time Left: ${timeLeft}`;
    }

    function checkAnswer(selected, correct) {
      clearInterval(timer);
      const feedback = document.getElementById("feedback");
      feedback.classList.remove("correct", "incorrect");
      void feedback.offsetWidth;

      if (selected === correct) {
        score++;
        updateScore();
        feedback.textContent = "Correct！";
        feedback.classList.add("correct");
      } else {
        feedback.textContent = `Incorrect！Correct Answer is 「${correct}」`;
        feedback.classList.add("incorrect");
      }
      setTimeout(getRandomQuestion, 1500);
    }

    function toggleMobileMenu() {
      const menu = document.getElementById("mobileMenu");
      menu.classList.toggle("hidden");
    }
  </script>
</body>
</html>